# Stage 2 - 선택자 대해 알아보자

두번째 스테이지에서는 선택자를 다룹니다.

스테이지 1을 통해 웹페이지가 어떻게 만들어지는지 대략적으로 감을 잡으셨나요?

앞으로 데이터 수집을 하기 위해서는 복잡하게 중첩되어있는 태그 구조 안에서 우리가 필요로 하는 부분을 콕 집어 프로그램에게 알려주어야 합니다.

바로 그런 역할을 하는 HTML 태그의 이름표, 선택자에 대해 배워보겠습니다.

## 실제 HTML 태그의 문법

첫번째 스테이지에서는 이해가 쉽도록 태그를 한글로 하여 HTML의 전체적인 구조를 보여드렸습니다.

하지만 "전체 물품 리스트" 라던지 "가격" 과 같은 텍스트는 우리 인간에게만 의미가 있는 단어들입니다.

![](../.gitbook/assets/image%20%28144%29.png)

HTML은 컴퓨터가 읽고 해석하는 언어이기 때문에 저런 태그를 실제로 쓰지는 않습니다.

컴퓨터는 HTML을 읽고 개발자가 뜻한대로 화면에 그려내야 하기 때문에, 내용이 아니라 종류에 더 관심이 많습니다.

글자를 담는 태그, 하이퍼링크를 연결하는 태그, 이미지가 들어가는 태그, 구역을 나누는 태그처럼 말이죠.

![](../.gitbook/assets/image%20%28155%29.png)

![&#xCEF4;&#xD4E8;&#xD130;&#xAC00; &#xC0DD;&#xAC01;&#xD558;&#xB294; &#xD0DC;&#xADF8;](../.gitbook/assets/image%20%28316%29.png)

하지만 그렇다고 이렇게만 작성한다면 코드를 작성하는 사람이 너무 힘들 것입니다. 같은 종류의 태그끼리 도무지 구분이 되어야 말이죠.

그래서 결국 HTML은 컴퓨터와 인간 모두를 만족시키기 위해 다음과 같은 형태를 가집니다.

![&#xCEF4;&#xD4E8;&#xD130; &#xC704;&#xC8FC;&#xC758; &#xD0DC;&#xADF8; &#xAD6C;&#xC131;&#xC5D0; &#xC778;&#xAC04;&#xC774; &#xD655;&#xC778;&#xD560; &#xBCC4;&#xBA85;&#xC744; &#xCD94;&#xAC00;](../.gitbook/assets/image%20%28305%29.png)

같은 종류의 태그도 내용과 역할에 따라 다른 별명을 가지기 때문에 알아보기가 쉽고, 컴퓨터 역시 태그에 색깔이나 모양을 입힐 때 이를 활용합니다. 같은 span 태그라도 제목\(class="title"\)은 두껍게, 가격\(class="price"\)은 파란색, 이런 식으로요.

이렇게 태그에 붙는 별명을 "선택자"라고 하며 ID와 클래스가 가장 많이 쓰입니다.



## ID와 클래스

![](../.gitbook/assets/image%20%28260%29.png)

ID는 흔히 아시듯 어떤 데이터의 고유한 식별자를 말합니다. 학급에서는 번호가 ID로 쓰이지요. HTML에서도 한 ID는 전체 HTML 문서에 하나밖에 존재하지 않습니다.

클래스는 같은 속성을 가진 여러 개체들을 묶어주는 집단의 이름입니다. 2학년 5반의 학생들이 모두 같은 클래스인 것처럼요. 4번 김민재 학생은 2학년 5반이라는 클래스에 속해있을 뿐만 아니라 축구부, 남학생이라는 클래스에도 속해있습니다. HTML에서도 이처럼 한 태그가 여러 개의 클래스를 가지는 것이 가능합니다.

![](../.gitbook/assets/image%20%2878%29.png)

ID와 클래스는 실제 웹 페이지에서 위와 같이 쓰입니다. 영상 정보들이 담겨있는 전체 div 공간\(빨간색\)은 내용이 담겨있다는 뜻에서 content라는 ID를 가지고 있습니다. 전체 내용을 담는 구역은 페이지에서 하나만 있어야 하기 때문에 ID를 사용한 것을 볼 수 있습니다.

좀 더 들어가면 cds\_area라는 클래스를 가진 div\(노란색\)가 영상들을 감싸고 있습니다. 비슷한 역할을 하는 태그들인 것 같은데 굳이 중첩되어있는 이유는 우리가 네이버 개발자가 아닌 이상 알 수 없습니다.

또 cds\_area 구역은 전체 페이지에서 하나만 존재하지만 ID가 아니라 클래스를 사용하고 있습니다. 이렇게 하나만 존재하는 선택자라고 해서 꼭 ID를 쓰는 것은 아니니 헷갈려하지 않으시는 게 좋습니다. 실제 개발자들도 ID와 클래스를 그렇게 엄격하게 구분해서 사용하지는 않기 때문입니다.

cds\_area안에는 cds라는 클래스를 가진 div 자식 태그가 여러 개 있습니다. 이 태그가 바로 각각 클립 하나하나를 담고있는 HTML 요소입니다.

우리가 할 일은 이러한 구조를 분석하고 원하는 데이터가 있는 위치를 컴퓨터에게 알려주는 것입니다. 이를 "선택자 경로" 라고 합니다. 길을 따라가듯 맨 바깥 태그부터 선택자들 따라 들어가면 원하는 위치에 도달할 수 있기 때문입니다.



## 선택자

![](../.gitbook/assets/image%20%28154%29.png)

먼저 선택자 경로를 이루는 하나하나의 선택자를 작성할 수 있어야 합니다. 선택자를 작성하는 법은 먼저 해당 HTML 요소의 태그를 쓰고 ID라면 \#ID, 클래스라면 .\(온점\)클래스명을 붙이는 것입니다.

꼭 두 부분이 다 필요하지는 않습니다. 태그만 있다면 선택자에 관계없이 해당 태그가 모두 선택되고, 선택자만 있다면 태그에 관계없이 해당 선택자를 갖는 모든 HTML 태그가 선택됩니다.

이제 이 선택자를 이용해 데이터 수집기에 명령을 내릴 수 있습니다.

![](../.gitbook/assets/image%20%2878%29.png)

먼저 실제 웹페이지에서 수집할 부분을 확인하고, 해당 부분의 HTML 요소를 찾아냅니다.

다음으로 그 요소의 태그와 함께 ID 혹은 클래스를 가져옵니다.

이것을 수집기가 알아들을 수 있게 선택자로 변환합니다.

![](../.gitbook/assets/image%20%28331%29.png)

이러면 데이터 수집기가 해당 부분의 태그와 그 안의 모든 내용을 수집해오게 됩니다.

## 선택자 경로

![](../.gitbook/assets/image%20%28112%29.png)

이와 같은 HTML 구조가 있습니다. 우리가 3주차부터 수집할 네이버 TV의 페이지 구조를 간략하게 만든 것입니다. 앞으로 사용할 데이터 수집기의 능력은 이렇습니다.



![](../.gitbook/assets/image%20%2887%29.png)

span 태그를 가져오라고 명령하면 HTML 문서 내의 모든 span 태그를 가져올 수 있습니다.



![](../.gitbook/assets/image%20%2859%29.png)

페이지 내의 모든 제목들을 가져오고 싶다면 페이지를 잘 분석한 후, 제목들이 공통으로 갖는 선택자 경로를 가져오도록 명령합니다.

좌측 메뉴의 제목들과 영상의 제목들이 모두 title이라는 클래스를 갖는 span 태그이기 때문에 span.title이 되겠지요?



### 자식 선택자

![](../.gitbook/assets/image%20%28297%29.png)

하지만 보통은 좌측 메뉴 제목같은 건 가져오지 않죠. 영상의 제목들만 뽑아내고 싶다면 선택자 경로를 좀 더 상세하게 지정해줘야 합니다. 영상 정보가 담겨있는 div.cds 안에서만 span.title을 가져오록 말입니다. 

![](../.gitbook/assets/image%20%2861%29.png)

두 단일 선택자 사이에 &gt; 를 사용하면 첫 번째 선택자를 먼저 찾은 후 그 바로 아래 자식 태그들 중에서 두 번째 선택자를 찾습니다.



### 자손 선택자

![](../.gitbook/assets/image%20%28340%29.png)

바로 아래의 자식들만 가져오는 자식 선택자로는 가끔 한계가 생깁니다. 띄어쓰기 하나로 표현하는 자손 선택자는 첫 번째 선택자를 먼저 찾은 후 그 자식, 자식의 자식 등 내부에 존재하는 모든 태그를 검색하여 두 번쨰 선택자를 찾습니다. 

![](../.gitbook/assets/image%20%28307%29.png)

사진 예시에서는 div\#container에서 출발하여 div.cds라는 한 단계를 건너뛰고 span.title에 도착하고 있습니다.

div\#container &gt; span.title 이었다면 아무것도 찾아내지 못합니다.

그럼 자손 선택자가 무조건 좋은 것 아니냐구요? "과유불급" 이란 말이 적절할 때도 있는 법입니다.

