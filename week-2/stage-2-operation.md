# Stage 2 - 기본 연산과 함수에 대해 알아보자

이번 스테이지에서는 데이터를 편집, 가공하는 데에 필수적인 연산과 함수에 대해 배워봅니다.

실제 데이터 수집을 할 때에도 굉장히 많이 사용되는 부분이니 잘 따라오며 이해해주세요!


[stage2.py]
먼저 새로운 스테이지가 되면 학습 내용이 뒤섞이지 않도록 새 파일을 만드시는 것을 권장합니다.

## 기본 연산자

숫자 값 끼리는 일반적인 사칙 연산이 가능합니다.

```python
print(1 + 2)
print(13 * 24)
print(3000 / 60 * 12)

secondsOfDay = 60 * 60 * 24
print(secondsOfDay)
```

숫자 대신 변수를 사용할 수도 있습니다. 변수를 사용할 때에는 언제나 변수명이 아닌 변수에 담긴 값이 대신 사용됩니다.

```python
product_name = '29인치 모니터'
price = 160000
company = '미타전자'
available = True

quantity = 24
discount = 0.1

total_price = price * quantity * (1 - discount)

print(total_price)
```

문자열도 연산이 가능할까요?

```python
name = "코알라"
cls = " 데이터 수집 스터디"

print("안녕" + name)  # 안녕코알라
print(name + cls)    # 코알 데이터 수집 스터디
print(name * 3)      # 코알라코알라코알라
print("ㅎ" * 10)     # ㅎㅎㅎㅎㅎㅎㅎㅎㅎㅎ
```

문자열끼리 더하면 이어붙인 새로운 문자열이 만들어지고

문자열과 숫자를 곱하면 숫자만큼 반복된 새로운 문자열이 만들어집니다.

## 함수란 무엇일까?

> [https://github.com/coalastudy/python-datascrapping-code/blob/master/week2/stage2-0-function.py](https://github.com/coalastudy/python-datascrapping-code/blob/master/week2/stage2-0-function.py)

함수란 정해진 일련의 명령을 손쉽게 반복할 수 있도록 저장하는 **매크로**같은 역할입니다.

여러분은 print\(\) 함수를 사용할 때 어떤 생각을 하나요? 입력된 텍스트가 거치는 과정과 사용되는 기술들을 속속들이 알고있으신가요?

아닙니다. 하지만 여러분은 print\(\) 함수의 괄호 안에 변수나 값을 넣으면 콘솔 창에 출력된다는 사실만 알고도 print\(\) 함수를 잘 사용합니다.

이것이 함수의 강력한 장점입니다. 구현된 내용을 몰라도 어떤 값을 입력하면 어떤 결과가 나오는 지만 알면 사용할 수 있습니다.


## 내장함수 사용해보기

```python
num = abs(-110)
print(num)

length_of_text = len('welcome to coala study!')
print(length_of_text)

print(max(15, 363, 166, 2, 97, 218))
```

abs, len, max 등은 print와 마찬가지로 python에 기본적으로 내장되어 언제든지 사용 가능한 함수입니다.

문자열의 길이를 뽑아내거나, 여러 숫자 중 최대값을 찾는 등 실제 함수 내부에서 작동하는 기능은 훨씬 복잡하겠지만 우리는 단순히 "문자열을 넣으면 길이가 나온다", "여러 숫자를 넣으면 최대값이 나온다" 라는 사실만 알고 사용하면 됩니다.

물론 함수가 마술 상자는 아닙니다. 숨겨진 곳에 정확한 작동 방식이 여러 줄로 작성되어있고, 우리가 함수 이름을 불러 호출하면 그 곳에 작성되어있는 기능이 실행되는 것입니다.


함수는 함수명\(입력값1, 입력값2...\) 의 형태로 호출되며, 실행이 종료된 후에는 결과값으로 바뀝니다.

위의 예제에서는 len('welcom to coala study!') 를 length_of_text 라는 변수에 할당하고 있습니다.

대부분의 프로그래밍 언어는 오른쪽에서 왼쪽으로 실행됩니다. 따라서 먼저 len('welcome to coala study') 함수가 실행되고 그 결과인 23이 도출되어 length_of_text에 할당되는 순서입니다.

함수의 입력값으로 또 다른 함수를 사용할 수도 있습니다. 이 경우 가장 안쪽에 있는 함수부터 실행됩니다.

위의 예제에서는 함수 print()에서 출력할 값으로 max(15, 363, 166, 2, 97, 218) 을 사용하고 있습니다. 먼저 안쪽에 있는 max() 함수가 실행되어 최대값 363을 결과로 반환하고, 코드는 print(363) 이 되어 363을 콘솔 창에 출력합니다.


## 타입 함수

Stage1 에서 다뤘던 문자열 타입을 기억하시나요?

문자열은 데이터 수집을 하며 가장 많이 다루는 데이터 타입입니다.

데이터 수집 뿐만 아니라 모든 프로그램에서 유용하게 쓰이는만큼 문자열을 편집하는 함수들도 파이썬 안에 이미 준비되어 있습니다.

```python
str = '무궁화 꽃이 피었습니다.'
new_str = str.replace('무궁화', '진달래')
'자바 언어를 알기 쉽게 설명하였다'.replace('자바', '파이썬')
idx = str.index('꽃')
```

그런데 이 함수들은 호출 방법이 약간 달라 보입니다.

단독으로 호출하는 것이 아니라, 문자열 변수 또는 문자열 값에 .을 찍어 실행합니다.

이는 "타입 함수"로, 오로지 특정 타입의 값에만 사용할 수 있도록 만들어진 함수입니다.

위에서 쓰인 .replace()나 .index()는 문자열 편집에 특화된 함수이기 때문에 문자열 변수에서만 호출할 수 있습니다.

그리고 자세히 살펴보시면, 함수의 대상이 되는 문자열은 따로 입력값 () 안에 집어넣지 않는 것을 볼 수 있습니다.

타입 함수를 호출하기 위해 .을 찍는 순간, 뒤의 함수는 앞의 변수를 위해 실행되는 것이 이미 결정되기 때문입니다.

즉 str.replace('무궁화', '진달래') 를 호출하면 함수는 알아서 str의 값인 '무궁화 꽃이 피었습니다.' 중 '무궁화' 부분을 찾아 '진달래' 로 바꾸고, 그 결과를 내놓습니다.


```python
print(new_str, idx)
# 이 시점에서 str의 값은 무엇일까요?
print(str)
```

대부분의 문자열 타입 함수는 편집의 대상이 되는 원본 값을 직접 수정하지 않습니다. 대신 수정 결과를 함수 결과로 내놓을 뿐입니다. 따라서 str.replace() 의 결과를 new_str에 저장하면, '무궁화'가 '진달래'로 바뀐 결과는 new_str에 들어있고 str은 원본 그대로 유지됩니다.

원본 str을 바꾸고 싶다면 str = str.replace('무궁화', '코스모스') 처럼 결과를 다시 원본 변수에 할당하면 됩니다.

```python
eng_str = 'The best joy is joy of understanding.'
eng_str = eng_str.upper()
print(eng_str)

spaced_str = '     정리해주세요.     '
print(spaced_str.strip())
```

[문자열 타입 함수 표]

이외에도 다양한 문자열 타입 함수가 있습니다. 재미를 느끼신 분은 https://wikidocs.net/13#_16 에서 더 많은 함수를 알아보고, 연습 문제도 풀어보세요!

```python
eng_str = 'The best joy is joy of understanding.'
eng_str = eng_str.replace('best', 'noblest').upper()
print(eng_str)
```

이는 함수 체이닝이라는 기법입니다. 위 코드를 실행하면 먼저 eng_str 변수에 replace가 적용된 결과가 'The noblest joy is joy of understanding.' 라는 문자열로 도출되고, 다시 이 문자열에 .upper() 가 적용되어 'THE NOBLEST JOY IS JOY OF UNDERSTANDING'이 됩니다. (체이닝은 왼쪽에서 오른쪽으로 실행됩니다.)

같은 값에 여러 함수를 적용해야 할 때, 중간 상태를 담는 불필요한 변수들을 줄이는 고급 기법입니다.

[자동완성 사진]

문자열 타입 함수는 파이썬 자체에 내장되어있기 때문에 위와 같이 문자열 타입에 .을 찍으면 사용 가능한 함수들이 자동으로 제시됩니다. 자동완성 적극적으로 활용하셔야 합니다!


타입 함수라는 말은 이해를 돕기 위해 사용한 용어로 공식적으로 쓰이는 말은 아닙니다.